<!DOCTYPE html>
<html>
<head>
<script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery.form/4.2.1/jquery.form.min.js"></script>

<script>
$(function () {
	init();
	
	function init(){
		$.get("loadParams",function(data){
	        $("#infinite").prop("checked","true"==data.infinite);
	        $("#subCorePoolSize").prop("value",data.subPoolSize);
	        $("#subLogNum").prop("value",data.subLogNum);
	        $("#pubLogNum").prop("value",data.pubLogNum);
	        var currentGroup = $.parseJSON(data.currentTestGroup);
	        $("#groupName").prop("value",currentGroup.groupName);
	        $("#groupNum").prop("value",currentGroup.groupNum);
	    });
	}
	
	$("#infinite").change(function(){
		$.get("switch")
	});
	
    $("#testForm").ajaxForm(function (data) {
    	alert('测试开始');
    });
    
    $("#addGroupForm").ajaxForm(function (data) {
    	alert('提交成功');
    	init();
    });
    
    $("#modifyParamsForm").ajaxForm(function (data) {
    	alert('提交成功');
    });
    
});
</script>
<meta charset="UTF-8">
<title>Mqtt stress client</title>
</head>

<body>
<h2>MQTT 压力测试</h2>

<table width="90%" >
<tr>
	<td height="200">
		
		<form  method="get" action="addGroup" id="addGroupForm">
			<table>
				<tr>
					<th colspan="2">增加测试组</th>
				</tr>
				<tr>
					<td width="120">组 名</td> <td> <input type="text" name="groupName" id="groupName"/></td>
				</tr>
				<tr>
					<td>测试组	 </td> <td><input type="text" name="groupNum" id="groupNum"/></td>
				</tr>
				<tr>
					<td><input type="submit"></td> <td></td>
				</tr>		
			</table>
		</form>
	</td>
	<td>
		<form action="modifyParams" id="modifyParamsForm">
			<table>
				<tr>
					<th width="120" colspan="2">修改测试参数</th>
				</tr>
				<tr >
					<td >订阅端corePoolSize</td> <td><input type="text" name="subCorePoolSize" id="subCorePoolSize" /></td>
				</tr>
				<tr>
					<td>订阅端统计条数</td> <td><input type="text" name="subLogNum" id="subLogNum"/></td>
				</tr>
				<tr>
					<td>发布端统计条数</td> <td><input type="text" name="pubLogNum" id="pubLogNum"/></td>
				</tr>
				<tr>
					<td><input type="submit"></td> <td></td>
				</tr>		
			</table>
		</form>
	</td>
</tr>

<tr>
	<td height="200">
		<form action="testUploadAll" method="get" id="testForm">
			<table>
				<tr>
					<th width="100">开始测试</th> <th>无限循环 <input type="checkbox" id="infinite"/> 共享订阅 <input type="checkbox" id=isShare" checked/></th>
				</tr>
				<tr >
					<td >topic:</td> <td><input type="text" name="topic" value="stressRequest"/></td>
				</tr>
				<tr>
					<td>message: </td> <td> <input type="text" name="msg" value="232300B6204A31343430305349313038303030310000060000000000980307E1030D0C1007FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0200010000FFFF0211110101000007E1030D0C1007FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0200010000FFFF021111010100070001010002FFFF07E1030D0C1007FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF0200010000FFFF0211110101000300010169"/></td>
				</tr>
				<tr>
					<td>start:</td> <td><input type ="text" name ="start" value=1></td>
				</tr>
				<tr>
					<td>end:</td> <td><input type ="text" name="end" value =400000></td>
				</tr>
				<tr>
					<td>corePoolSize:</td> <td> <input type ="text" name="corePoolSize" value=20></td>
				</tr>
				<tr>
					<td><input type="submit"></td> <td></td>
				</tr>		
			</table>
		</form>
	</td>
	<td >
	
	</td>
</tr>

</table>


</body>
</html>